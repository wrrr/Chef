#!/bin/zsh

echo "ğŸ”„ Staging local changes..."
git add .
if ! git diff-index --quiet HEAD; then
  git commit -m "Sync with GitHub: sanitize project structure"
fi
git push

echo "ğŸ“¦ Installing dependencies..."
npm install

echo "ğŸ“¦ Building production bundle..."
npm run build

echo "â˜ï¸ Deploying to Cloudflare Pages..."
# Clear Wrangler state
rm -rf .wrangler/state

# Deploy using the correct command for Pages
wrangler pages deploy ./build --env-file .env

echo "âœ… Deployment complete! Visit your live site."
