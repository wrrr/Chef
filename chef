#!/bin/zsh

echo "====================================="
echo "1ï¸âƒ£  Launch Website Preview (Local)"
echo "2ï¸âƒ£  Prepare Website for Launch (Build)"
echo "3ï¸âƒ£  Publish Live Website (Cloudflare)"
echo "4ï¸âƒ£  Deep Clean & Reset Project"
echo "5ï¸âƒ£  Sync Local Repository with GitHub"
echo "6ï¸âƒ£  Sync with Builder.io"
echo "7ï¸âƒ£  Launch Builder.io Editor (Local)"
echo "====================================="
echo "Enter 1, 2, 3, 4, 5, 6, or 7: "
read option

case $option in
  1)
    npm start
    ;;
  2)
    npm run build
    ;;
  3)
    ./chefdeploy
    ;;
  4)
    echo "ğŸ”„ Performing deep clean..."
    rm -rf build node_modules/.cache
    ;;
  5)
    echo "ğŸ”„ Syncing with GitHub..."
    
    # Remove any old locks or leftover git processes
    find . -name "*.lock" -type f -delete
    
    # Remove cached folders that should not be tracked
    git rm -r --cached backups 2>/dev/null
    git rm -r --cached node_modules/.cache 2>/dev/null
    
    git add .
    
    # Commit if there are changes
    if ! git diff-index --quiet HEAD; then
      git commit -m "Sync with GitHub: sanitize project structure"
    fi
    
    git push
    ;;
  6)
    echo "ğŸ”„ Syncing with Builder.io..."
    # Add your Builder.io sync commands here
    ;;
  7)
    echo "ğŸš€ Launching Builder.io Editor..."
    # Add local launch command here
    ;;
  *)
    echo "âŒ Invalid option, exiting."
    ;;
esac
